<p align="center">
 <img alt="pinocchio-pubkey" src="https://github.com/user-attachments/assets/4048fe96-9096-4441-85c3-5deffeb089a6" height="100"/>
</p>
<h3 align="center">
  <code>pinocchio-pubkey</code>
</h3>
<p align="center">
 Companion <code>Pubkey</code> helpers for <a href="https://github.com/anza-xyz/pinocchio"><code>pinocchio</code></a>.
</p>
<p align="center">
  <a href="https://crates.io/crates/pinocchio-pubkey"><img src="https://img.shields.io/crates/v/pinocchio-pubkey?logo=rust" /></a>
  <a href="https://docs.rs/pinocchio-pubkey"><img src="https://img.shields.io/docsrs/pinocchio-pubkey?logo=docsdotrs" /></a>
</p>

## Overview

This crate provides two convenience macros to resolve `Pubkey`s at compile time:

* `pubkey!`: takes a pubkey value as a base58 `&str` and generates its correspondent `Pubkey` (byte array)
* `declare_id!`: takes a pubkey value as a base58 `&str` (usually representing a program address) and generates an `ID` constant, `check_id()` and `id()` helpers

It also defines a `from_str` helper that takes a `&str` and returns the correspondent `Pubkey` value.

## Examples

Once the project is built the first time with `cargo build-sbf`, a new keypair is automatically generated. A public key can be retrieved with:
```bash
solana-keygen pubkey ./target/deploy/your_program-keypair.json
```

Instead of the autogenerated keypair, a [vanity key](https://solana.com/developers/cookbook/wallets/generate-vanity-address) can be used. You can move the vanity keypair to `./target/deploy/your_program-keypair.json`.

Remember to back up the keypair file securely, it is necessary for deploy the program.

Public keys can be embedded into the program code in the following ways.

1) Creating a `Pubkey` constant value from a static `&str`:
```rust
use pinocchio::pubkey::Pubkey;

pub const AUTHORITY: Pubkey = pinocchio_pubkey::pubkey!("7qtAvP4CJuSKauWHtHZJt9wmQRgvcFeUcU3xKrFzxKf1");
```

2) Declaring the program address of a program (usually on your `lib.rs`):
```rust
pinocchio_pubkey::declare_id!("Ping111111111111111111111111111111111111111");
```

3) Creating a `Pubkey` from a `&str`:
```rust
let address = String::from("7qtAvP4CJuSKauWHtHZJt9wmQRgvcFeUcU3xKrFzxKf1");
let owner = pinocchio_pubkey::from_str(&address);
```

## License

The code is licensed under the [Apache License Version 2.0](../LICENSE)
